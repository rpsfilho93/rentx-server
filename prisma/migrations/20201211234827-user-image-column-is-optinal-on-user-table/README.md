# Migration `20201211234827-user-image-column-is-optinal-on-user-table`

This migration has been generated by Ricardo Filho at 12/11/2020, 8:48:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "image" TEXT,
    "password" TEXT NOT NULL,
    "admin" BOOLEAN NOT NULL DEFAULT false,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Car" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "brand" TEXT NOT NULL,
    "daily_value" DECIMAL(65,30) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Specification" (
    "id" TEXT NOT NULL,
    "car_id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "description" TEXT NOT NULL,
    "icon" TEXT NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Rental" (
    "id" TEXT NOT NULL,
    "car_id" TEXT NOT NULL,
    "client_id" TEXT NOT NULL,
    "start_date" TIMESTAMP(3) NOT NULL,
    "end_date" TIMESTAMP(3) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "CarImage" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "car_id" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")

ALTER TABLE "Specification" ADD FOREIGN KEY("car_id")REFERENCES "Car"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Rental" ADD FOREIGN KEY("car_id")REFERENCES "Car"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Rental" ADD FOREIGN KEY("client_id")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "CarImage" ADD FOREIGN KEY("car_id")REFERENCES "Car"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201211234827-user-image-column-is-optinal-on-user-table
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,62 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id            String         @id @default(uuid())
+  name          String
+  email         String         @unique
+  image         String?
+  password      String
+  admin         Boolean        @default(false)
+  created_at    DateTime       @default(now())
+  updated_at    DateTime       @updatedAt
+}
+
+model Car {
+  id            String         @id @default(uuid())
+  name          String
+  brand         String
+  daily_value   Float
+  specs         Specification[]
+  created_at    DateTime       @default(now())
+  updated_at    DateTime       @updatedAt
+}
+
+model Specification {
+  id            String         @id @default(uuid())
+  car           Car            @relation(fields: [car_id], references: [id])
+  car_id        String
+  name          String
+  description   String
+  icon          String
+  created_at    DateTime       @default(now())
+  updated_at    DateTime       @updatedAt
+}
+
+model Rental {
+  id            String         @id @default(uuid())
+  car           Car            @relation(fields: [car_id], references: [id])
+  car_id        String
+  client        User           @relation(fields: [client_id], references: [id])
+  client_id     String
+  start_date    DateTime
+  end_date      DateTime
+  created_at    DateTime       @default(now())
+  updated_at    DateTime       @updatedAt
+}
+
+model CarImage {
+  id            String         @id @default(uuid())
+  name          String
+  car           Car            @relation(fields: [car_id], references: [id])
+  car_id        String
+}
```


