# Migration `20201202204956-add-specification-rental-tables`

This migration has been generated by Ricardo Filho at 12/2/2020, 5:49:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Specification" (
    "id" TEXT NOT NULL,
    "car_id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "description" TEXT NOT NULL,
    "icon" TEXT NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "Rental" (
    "id" TEXT NOT NULL,
    "car_id" TEXT NOT NULL,
    "client_id" TEXT NOT NULL,
    "start_date" TIMESTAMP(3) NOT NULL,
    "end_date" TIMESTAMP(3) NOT NULL,
    "created_at" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updated_at" TIMESTAMP(3) NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "Specification" ADD FOREIGN KEY("car_id")REFERENCES "Car"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Rental" ADD FOREIGN KEY("car_id")REFERENCES "Car"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Rental" ADD FOREIGN KEY("client_id")REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201202200522-add-car-table..20201202204956-add-specification-rental-tables
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -25,7 +25,31 @@
   id            String         @id @default(uuid())
   name          String 
   brand         String
   daily_value   Float
+  specs         Specification[] 
   created_at    DateTime       @default(now()) 
   updated_at    DateTime       @updatedAt
+}
+
+model Specification {
+  id            String         @id @default(uuid())
+  car           Car            @relation(fields: [car_id], references: [id]) 
+  car_id        String          
+  name          String 
+  description   String 
+  icon          String 
+  created_at    DateTime       @default(now()) 
+  updated_at    DateTime       @updatedAt
+}
+
+model Rental {
+  id            String         @id @default(uuid())
+  car           Car            @relation(fields: [car_id], references: [id])           
+  car_id        String
+  client        User           @relation(fields: [client_id], references: [id])
+  client_id     String
+  start_date    DateTime
+  end_date      DateTime  
+  created_at    DateTime       @default(now()) 
+  updated_at    DateTime       @updatedAt
 }
```


